# 计科1803班设计报告
<!-- TOC -->

- [计科1803班设计报告](#计科1803班设计报告)
    - [总体概况](#总体概况)
        - [版本](#版本)
        - [文档阅读者](#文档阅读者)
        - [主要工作](#主要工作)
    - [一、博物馆网站数据采集子系统](#一博物馆网站数据采集子系统)
        - [1、引言](#1引言)
            - [1.1.功能概述](#11功能概述)
            - [1.2.系统设计目的](#12系统设计目的)
            - [1.3.参考文献](#13参考文献)
        - [2、子系统详细设计](#2子系统详细设计)
            - [2.1.数据模型](#21数据模型)
            - [2.2.流程图](#22流程图)
            - [2.3.ER图](#23er图)
            - [2.4.工程结构](#24工程结构)
        - [3、具体实现](#3具体实现)
            - [3.1.后端服务器/数据库地址](#31后端服务器数据库地址)
            - [3.2.爬虫各个文件功能](#32爬虫各个文件功能)
            - [3.3运行步骤](#33运行步骤)
    - [二、博物馆新闻采集分析子系统](#二博物馆新闻采集分析子系统)
        - [1. 导言](#1-导言)
            - [1.1系统设计背景](#11系统设计背景)
            - [1.2 系统设计前提](#12-系统设计前提)
            - [1.3 系统设计目的](#13-系统设计目的)
        - [2. 体系结构](#2-体系结构)
            - [2.1 系统运行环境](#21-系统运行环境)
            - [2.2 系统体系结构](#22-系统体系结构)
        - [3.数据库定义](#3数据库定义)
            - [3.1 概述](#31-概述)
            - [3.2 数据项定义](#32-数据项定义)
        - [4. 模块设计](#4-模块设计)
            - [4.1模块设计](#41模块设计)
                - [1.数据获取](#1数据获取)
                - [2.数据加工](#2数据加工)
                - [3.数据分析](#3数据分析)
                - [4.数据定制服务](#4数据定制服务)
            - [4.2流程图](#42流程图)
        - [5. 项目结构](#5-项目结构)
        - [6.实现方法](#6实现方法)
            - [6.1数据获取](#61数据获取)
            - [6.2数据处理](#62数据处理)
            - [6.3新闻情感分析](#63新闻情感分析)
            - [6.4服务端控制](#64服务端控制)
            - [6.5 数据入库更新](#65-数据入库更新)
    - [三、博物馆信息服务子系统](#三博物馆信息服务子系统)
        - [1.导言](#1导言)
            - [1.1目的](#11目的)
            - [1.2范围](#12范围)
            - [1.3文档阅读者](#13文档阅读者)
            - [1.4参考文献](#14参考文献)
        - [2.系统分析](#2系统分析)
            - [2.1系统功能简介](#21系统功能简介)
            - [2.2系统结构设计](#22系统结构设计)
            - [2.3模块设计](#23模块设计)
            - [2.4系统接口设计](#24系统接口设计)
        - [3.界面设计](#3界面设计)
        - [4.设计方案](#4设计方案)
    - [四、博物馆导览子系统](#四博物馆导览子系统)
        - [1、绪论](#1绪论)
            - [1.1.设计背景：](#11设计背景)
            - [1.2设计准备：](#12设计准备)
        - [2、可行性研究](#2可行性研究)
            - [2.1背景：](#21背景)
            - [2.2可行性研究前提：](#22可行性研究前提)
            - [2.3可行性研究分析：](#23可行性研究分析)
        - [3、项目开发计划](#3项目开发计划)
            - [3.1项目开发计划内容：](#31项目开发计划内容)
            - [3.2.产品：](#32产品)
            - [3.3.支持条件：](#33支持条件)
        - [4、软件测试](#4软件测试)
            - [4.1.软件测试概念：](#41软件测试概念)
            - [4.2.软件测试目的：](#42软件测试目的)
            - [4.3.软件测试原则：](#43软件测试原则)
            - [4.4.本软件测试步骤：](#44本软件测试步骤)
    - [五、后台管理子系统设计报告](#五后台管理子系统设计报告)
        - [1.总体设计](#1总体设计)
            - [1.1系统设计的原则](#11系统设计的原则)
            - [1.2体系结构设计](#12体系结构设计)
            - [1.3功能架构设计](#13功能架构设计)
        - [2.功能模块设计](#2功能模块设计)
            - [2.1登录模块](#21登录模块)
            - [2.2用户管理模块](#22用户管理模块)
            - [2.3讲解审核模块](#23讲解审核模块)
            - [2.4数据管理模块](#24数据管理模块)
            - [2.5数据库文件恢复和备份模块](#25数据库文件恢复和备份模块)
        - [3.页面设计](#3页面设计)
            - [3.1登录界面](#31登录界面)
            - [3.2用户管理界面](#32用户管理界面)
            - [3.3审核界面](#33审核界面)
            - [3.4数据管理界面](#34数据管理界面)
            - [3.5备份恢复界面](#35备份恢复界面)
        - [4数据库设计](#4数据库设计)
            - [4.1数据库安装与配置](#41数据库安装与配置)
            - [4.2数据库表结构设计](#42数据库表结构设计)

<!-- /TOC -->
## 总体概况
### 版本
Version1.2   编写人 张艺朦
### 文档阅读者
计科1803开发人员  
计科1803管理人员  
软件工程教师  
其他阅读者 
### 主要工作
为使用户体验最佳，对团体总体布局进行考量，仔细设计各系统。博物馆系统界面应简单易用，使用方便。需求分析之后要进一步明确问题域，站在用户人群的角度进行开发。进行可行性分析，从经济、技术、操作等方面入手，看问题能否解决。对系统功能进行调查分析，逐步抽象，构造功能模块，建立系统的功能模型、数据模型、动态模型等等。然后再依据需求，设计出数据库和APP界面。五个子系统之间应做好设计，使后期衔接方便。下面将介绍各个子系统的详细设计。
## 一、博物馆网站数据采集子系统
### 1、引言
#### 1.1.功能概述
编写程序从博物馆网站爬取信息，进行加工处理。主要包括以下功能：
1）数据爬取：爬取全国一级博物馆（130家左右）的网站信息，包括博物馆基本的介绍、参观信息（开放时间等）、展览信息、教育活动、经典藏品信息、学术研究信息等，对于展览信息可以定时更新。
2）数据加工：对爬取的信息进行过滤和加工，抽取需要的内容。例如：对于展览页面，要得到展览主题、展览时间、展览地点、展览介绍等信息。
3）数据导入：采用合适的方式保存抽取的数据，能够导入到数据库中。
4）数据更新：支持数据的持续更新。例如：根据情况，每天或每周爬取一次新的数据，更新原有数据。

#### 1.2.系统设计目的

本文档是博物馆网站数据采集子系统的设计说明文档，阅读对象是本组成员以及其他子系统的产品开发、测试和维护人员。


#### 1.3.参考文献

[1] 罗杰 S.普莱斯曼，布鲁斯 R.马克西姆，Software Engineering:A Practitioner's Approach（英文精编版，第8版） . 北京：机械工业出版社，2016

[2] 孙家广，《软件工程：理论、方法与实践》 .北京：高等教育出版社，2008

### 2、子系统详细设计

#### 2.1.数据模型

**MuseumBasicInformation(博物馆基本信息表）:**

| 字段名                           | 数据类型     | 数据类型属性 |
| -------------------------------- | ------------ | ------------ |
| museumID(博物馆ID)               | int(11)      | NN,PK        |
| museumName(博物馆名)             | varchar(50)  | NN           |
| openingTime(开放时间)            | varchar(255) |              |
| address(地址)                    | varchar(255) |              |
| consultationTelephone(咨询电话)  | varchar(255) |              |
| introduction(博物馆基本介绍)     | text         |              |
| longitude(博物馆经度)            | varchar(30)  |              |
| latitude(博物馆纬度)             | varchar(30)  |              |
| publicityVideoLink(宣传视频链接) | text         |              |

**Collection(藏品表):**

| 字段名                            | 数据类型     | 数据类型属性 |
| --------------------------------- | ------------ | ------------ |
| collectionID(藏品ID)              | int(11)      | NN,PK,AI     |
| collectionName(藏品名)            | varchar(100) | NN,UQ        |
| museumID(藏品所属博物馆ID)        | int(11)      | NN           |
| museumName(藏品所属博物馆名)      | varchar(50)  | NN           |
| collectionIntroduction(藏品介绍)  | text         |              |
| collectionImageLink(藏品图片链接) | text         |              |

**Exhibition(展览表)**

| 字段名                            | 数据类型     | 数据类型属性 |
| --------------------------------- | ------------ | ------------ |
| exhibitionID(展览ID)              | int(11)      | NN,PK,AI     |
| exhibitionName(展览名)            | varchar(100) | NN,UQ        |
| museumID(展览所属博物馆ID)        | int(11)      | NN           |
| museumName(展览所属博物馆名)      | varchar(50)  | NN           |
| exhibitionTime(展览时间)          | varchar(255) |              |
| exhibitionIntroduction(展览介绍)  | text         |              |
| exhibitionImageLink(展览图片链接) | text         |              |

**Academic(学术研究表)**

| 字段名                             | 数据类型    | 数据类型属性 |
| ---------------------------------- | ----------- | ------------ |
| academicID(学术研究ID)             | int(11)     | NN,PK,AI     |
| museumID(学术研究所属博物馆ID)     | int(11)     | NN           |
| museumName(学术研究所属博物馆名)   | varchar(50) | NN           |
| academicAuthor(学术研究作者)       | varchar(50) |              |
| academicTitle(学术研究标题)        | text        | NN           |
| academicPostTime(学术研究发表时间) | text        |              |
| academicLink(学术研究链接)         | text        |              |

**Education(教育活动表)**

| 字段名                              | 数据类型     | 数据类型属性 |
| ----------------------------------- | ------------ | ------------ |
| educationID(教育活动ID)             | int(11)      | NN,PK,AI     |
| educationName(教育活动名称)         | varchar(255) | NN           |
| museumID(教育活动所属博物馆ID)      | int(11)      | NN           |
| museumName(教育活动所属博物馆名)    | varchar(50)  | NN           |
| educationTime(教育活动时间)         | text         |              |
| educationIntroduction(教育活动介绍) | text         |              |

#### 2.2.流程图
介绍：该子系统使用Python利用Scrapy框架爬取所有博物馆的基本信息、藏品信息、展览信息，将信息爬取下来存到远程数据库。该子系统提供了博物馆数据，无界面展示。
![image](https://note.youdao.com/yws/api/personal/file/8F7DDFC7DE5C4BFE96881DCED3D28DE3?method=download&shareKey=9f52595689ecc733a9f86346e80b7dfc)
#### 2.3.ER图
![image](https://note.youdao.com/yws/api/personal/file/5C0E56586F7F4A798BAB0DE151A498EE?method=download&shareKey=53e12d5fad3558825c653f6b885a84fa)
#### 2.4.工程结构
![image](https://note.youdao.com/yws/api/personal/file/C36A6EE42E7C41D6B7C347E22A567211?method=download&shareKey=696bf03561124674544f6c71778d077b)
### 3、具体实现

#### 3.1.后端服务器/数据库地址

- 数据库IP/主机名：46.17.172.103

- 本系统的硬件环境如下：
- 服务器：
-30GB SSD存储
-内存：256MB以上
-承载每月10000独立访客
-WEB服务器
-100GB带宽
-支持GIT访问  

#### 3.2.爬虫各个文件功能
	
	mySpider		//项目root
	 ├── .idea				//存放Pycharm项目配置信息
	 │	  ├── ...
	 │
	 ├── auxiliary_files	//存放爬取网页url列表
	 │	  ├── ...
	 │
	 ├── commands			//存放自定义命令
	 │	  ├── ...
	 │
	 ├── spiders			//存放爬虫脚本文件
	 │	  ├── Museum[id].py			//爬取对应id博物馆基本信息
	 │	  ├── Collection[id].py		//爬取对应id博物馆藏品信息
	 │    ├── Exhibition[id].py		//爬取对应id博物馆展览信息
	 │    └── ...
	 ├── item.py			//向数据库提交数据的类结构
	 ├── middlewares.py		//中间件，其中包含了下载器类，用于高速地下载网页源码
	 ├── pipelines			//实体管道，用于处理爬虫提取的实体。即连接数据库并向其中传入数据
	 ├── setting.py			//配置文件，用于激活下载器与管道，配置爬虫头部信息等
	 └── str_filter.py		//定义爬取信息过滤规则

#### 3.3运行步骤
在项目目录（mySpider或first_group）下打开termina输入命令：
	运行单个爬虫
	scrapy scrawl [爬虫文件名称]
	
	运行所有爬虫
	scrapy crawlall
  


## 二、博物馆新闻采集分析子系统
### 1. 导言
#### 1.1系统设计背景
随着社会的繁荣、经济的发展和科学技术的进步,博物馆新闻宣传面临前所未有的发展机遇和挑战。博物馆已经成为思想意识形态领域的一个重要阵地,也成为中国传播政治思想、弘扬民族传统文化的重要场所。本子系统着重在对博物馆的新闻进行采集筛选分析，来使人们对各大博物馆发生的事件有更好的了解认识。
#### 1.2 系统设计前提
项目的目标是开发一款博物馆新闻分析子系统，同时组员们获得系统的软件工程项目训练。发布的产品是子系统的源代码、技术文档和用户手册等。主要工作是需求分析、系统设计、开发测试，关键里程碑分别为需求规格说明书的发布，系统设计说明书的发布，和系统的交付。小组成员需对系统进行了较为详细的需求分析及具备一定的系统设计理论知识。
#### 1.3 系统设计目的
通过程序能从主要的新闻网站上爬取博物馆相关的新闻信息，进行加工处理。主要包括以下功能：
数据获取：爬取主要的新闻网站中的博物馆相关新闻（如百度新闻）。可以支持爬取指定时间范围内的新闻，如1年内的新闻，半年内的新闻等。
数据加工：对于爬取的信息进行过滤和加工，抽取需要的内容。例如，抽取新闻的发布时间、新闻的标题、新闻的内容、新闻涉及的博物馆等。
数据分析：对于加工好的新闻，分析是正面新闻还是负面信息。可采用已有的可直接调用的服务和代码实现。
数据定制服务：可以根据指定的某一家博物馆，获取该博物馆的指定时间的新闻，并进行加工分析，得到该博物馆指定时间内的主要新闻，正面新闻和负面新闻。
		同时帮助开发人员进行系统的实现部署，并与其他子系统达成一致。
### 2. 体系结构
#### 2.1 系统运行环境
  - 操作系统
    - Win10/Macos/Linux
  - 数据库
    - MySQL 或其他数据库操作软件
  - 浏览器
    - Microsoft Edge/Google Chrome  
   
![image](https://note.youdao.com/yws/public/resource/85fb3bd2da5b57aa0d3a0a5bc9546482/xmlnote/OFFICEDB041145CECE40378C8811A5C4BE413C/5)
####2.2 系统体系结构
![image](https://note.youdao.com/yws/public/resource/85fb3bd2da5b57aa0d3a0a5bc9546482/xmlnote/OFFICE8E838485DCF64AECB47E563C5B7DC918/6)
  

### 3.数据库定义
#### 3.1 概述
该子系统的数据来源是各大正规新闻网站有关博物馆的新闻。爬取内容包括新闻标题，发布时间，新闻正文，涉及到的博物馆以及新闻的分析。数据库的概念模型设计用来反映现实世界中的实体、属性和它们之间的关系等的原始数据形式。逻辑结构设计是将各局部的E-R图进行分解、合并后重新组织起来形成数据库全局逻辑结构，包括所确定的关键字和属性、重新确定的记录结构、所建立的各个数据之间的相互关系。而信息存储结构的设计在系统的设计中至关重要，要考虑到数据冗余、系统执行效率、信息控制以及维护等方面的要求。信息的管理离不开数据库的支持，我们采用mysql数据库管理系统。 数据库的物理设计主要是对数据在内存中的安排，包括对索引区、缓冲区的设计；对使用的外存设备及外存空间的组织，包括索引区、数据块的组织与划分；设置访问数据的方式方法。
####3.2 数据项定义
   表名newsall
![image](https://note.youdao.com/yws/api/personal/file/WEB9a3df8f65e08655cbb492e1156586562?method=download&shareKey=40802d100f0070e0e275dc2ed7af0292)

  
### 4. 模块设计
#### 4.1模块设计
 ![image](https://note.youdao.com/yws/public/resource/85fb3bd2da5b57aa0d3a0a5bc9546482/xmlnote/OFFICE5CB4D13908A14252A332D4226837ECBE/7)
##### 1.数据获取  
	用例描述：子系统对新闻数据进行爬取。爬取主要的新闻网站中的博物馆相关新闻。可以支持取指定时间范围内的新闻，如1年内的新闻，半年内的新闻等。    
	执行者：子系统  
	前置条件：用户登陆并进入系统  
	后置条件：子系统对爬取的信息进行加工  
	基本路径：用户登入到此系统内，根据其他子系统提供的接口，查看自己所需的新闻。  
##### 2.数据加工  
	用例描述：对爬取的信息进行加工。子系统对于爬取的信息进行过滤和加工，抽取需要的内容。例如，抽取新闻的发布时间、新闻的标题、新闻的内容、新闻涉及的博物馆等。  
	执行者：博物馆新闻分析子系统  
	前置条件：子系统已经对数据爬取完成  
	后置条件：信息加工好后，系统对信息进行分析  
	基本路径：1.对爬取的信息进行过滤和加工。2. 从初步加工的信息中抽取所需的内容。  
##### 3.数据分析
	用例描述：对加工好的新闻，分析是否是正面信息。对于加工好的新闻，分析是正面新闻还是负面信息，并对其进行一个百分制的打分。  
	执行者：博物馆新闻分析子系统  
	前置条件：对爬取的信息已加工完成  
	后置条件：分析结束后，用户可获得所需新闻  
	基本路径：1. 采用已有的可直接调用的服务和代码实现。2. 分析是正面新闻还是负面新闻  
##### 4.数据定制服务  
	用例描述：根据用户需求对指定的博物馆，获取该博物馆指定时间的新闻，并进行加工和分析。可以根据指定的某一家博物馆及用户的指令，获取该博物馆的指定时间的新闻，并进行加工分析，得到该博物馆指定时间内的主要新闻，正面新闻和负面新闻。  
	执行者：用户  
	前置条件：用户已选择指定的博物馆和时间  
	后置条件：用户指定博物馆和时间后，获得相应的新闻信息  
	基本路径：1. 指定某一个博物馆，指定获该博物馆新闻的时间。2. 得到该博物馆指定时间内的主要新闻，正面新闻和负面新闻。  


#### 4.2流程图
 ![image](https://note.youdao.com/yws/public/resource/85fb3bd2da5b57aa0d3a0a5bc9546482/xmlnote/OFFICE4D7E658B0B8144A7AE1FF2C35DC90051/8)
 
### 5. 项目结构
	博物馆新闻获取分析子系统
			·文档
				·项目管理计划
				·需求规格说明
				·设计报告
				·开发周记
				·测试报告
				·用户使用手册
			·代码
				·数据获取与处理
				·新闻标题情感分析
				·服务端代码控制
			·数据
				·远程数据库中博物馆新闻表的定义与操作
### 6.实现方法
#### 6.1数据获取
在Python爬虫中，我们利用 xpath 快速地定位 HTML\XML 响应中的特定元素以及获取节点的信息，并且通常情况下会比使用正则表达式提取更简单而且更高效。首先是通过response.xpath实现百度新闻的数据获取与搜索引擎传参，接下来使用contest.xpath从html中提取所有正文内容。同时定义了scrapy中spider的各种进程请求响应以及时了解到爬取的异常。提取出全部相关新闻页的链接与标签，再爬取提取出来的链接对应的界面，分析源码后得到新闻的标题、发布时间、内容和封面链接。
#### 6.2数据处理
piplines中将爬取的数据整理并写入数据库中。其中processitem（）为pipelines中的主要处理方法，默认会自动调用。之后将存在缺失字段的新闻丢弃（如无时间标注等），并且对于掺杂在正文间的无用信息（例如记者信息、新闻来源等）通过人工排查形式和正则表达式进行删除。
#### 6.3新闻情感分析
调用Python类库snownlp，逐条分析新闻标题情感。由于该模块内并没有直接涵盖新闻类分析，则需要调用tensorflow库预先进行训练集训练。这里选择创造一些常见的新闻标题作为正面训练集和负面训练集。为了防止过拟合现象，训练集总量不超过全部数据的百分之三十。最后通过分数来体现该新闻的正面/负面程度。
#### 6.4服务端控制
实现工具 Pycharm专业版。
实现步骤如下：
⑴ 通过pycharm的内置功能tool-deployment-configuration实现远程连接服务器ip，配置端口等相关属性。在服务器文件夹中建立对应的项目文件，以便文件上传。
		⑵ 通过update功能上传代码。
#### 6.5 数据入库更新
在Python环境下调用pymysql以直接连接远程数据库。为了避免产生主键重复的错误（数据库中主键是新闻编号），首先需要确定数据表中现有的主键的最大值，作为本次数据更新入库的起始新闻编号。之后则遍历字典值内爬取且处理过的新闻，并对其执行pymysql内置的查询语句，判断这条新闻的标题是否存在，如果不存在并且该数据没有字段缺失，就存储到定义的临时变量里，否则继续遍历下一条新闻。最后将数据导入数据库中的新闻表。

## 三、博物馆信息服务子系统
### 1.导言
#### 1.1目的
该文档目的是让所有信息服务子系统开发人员对该子系统结构有一个初步的认识，统一开发规范，了解具体的开发内容，保证项目有序地进行。

#### 1.2范围
	该文档主要内容包括：
	*	系统功能简介  
	*	系统结构设计
	*	系统接口设计
	*	模块设计
	*	界面设计

#### 1.3文档阅读者
	*	开发人员
	*	项目管理人员
	*	测试人员

#### 1.4参考文献
《韩万江软件文档范例》、《软件工程详细设计说明书》、《软件工程课程设计教学大纲》、《Android移动应用基础》

### 2.系统分析
#### 2.1系统功能简介
*	数据浏览：在手机端可以浏览各博物馆及其详细信息：参观信息、展览、教育活动、藏品、新闻等。采用列表方式或模糊查询方式查看博物馆名称、图片、位置和简介等基本信息。
*	数据查询：支持数据的查询功能。例如，按照博物馆查询、按照展览查询、按照藏品名称查询，查询结果可以按照多种方式排序，点击查找结果可直接进入详情页。
*	用户反馈：支持用户评论、打分等功能。可以按照展览、服务、环境三个方面让用户对一个博物馆进行打分。
*	数据分析：分析博物馆信息以及用户反馈信息，用排名列表和可视化方式显示分析结果。

#### 2.2系统结构设计
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICE24A7B560348C41A9813A071EC6595393/53)
 
#### 2.3模块设计
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICE2773D53C7C4E4D9783E5A0AF4FC2672B/54)  

#### 2.4系统接口设计


### 3.界面设计
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICECD1F0EA3A3AF45239FA554162D1E231A/55) 

![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICE32BF75B95ABF4AF298F1A3986C097431/56)                                    
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICEBD6B08E676474A24A4A613628121E302/57)          
    
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICEB92B10A16602470D8B679A2922884F38/58)                           
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICE1C57C0D092194E508BA2BFE1D28677A1/59)         
 
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICEF788E3109FEA43069AEBA5AFCBBB789A/60)                           
 ![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICEE208C9830D5B405E8ADC71ACDB19C2AA/61)        

![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICE21FD8B680FEF431081800C39F93D527A/64)    
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICE208A1A0BD57E465E8D824D1CB4D98925/62   )                        
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICE8C39F6713C174D4A81795C982948A9AE/65)

![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICEF900C99D57EA4214BD18CAF048D46A6A/66)                               
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICE395DC30055344E7982534C1AF81B0457/67)          
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICEFC64D87D332E42A383A6D8757B31E324/68)                                
![image](https://note.youdao.com/yws/public/resource/5ee1d3bba383bdc91082efe981ec9071/xmlnote/OFFICEBFBEB9FC99034E37A04B78F6C8E5E76A/69)          

                                 
### 4.设计方案
	欢迎页面activity 
	首页Main Activity——分为博物馆，排行榜，个人信息三个fragment
	搜索Search Activity——跳转至博物馆详情页，展览详情页，藏品详情页
	显示博物馆详情页 Show Museum Activity——跳转至藏品，展览，新闻，活动页





## 四、博物馆导览子系统
### 1、绪论
#### 1.1.设计背景：  
在高速发展的信息时代，手机成为了人们出行时的常用工具，由此各式各样的APP应运而生。我们小组此次设计的软件为博物馆导览APP，它可以让旅客在参观各地博物馆时提供每个博物馆的基本展览信息和位置信息，方便旅客选择合适的博物馆进行观光浏览。  
#### 1.2设计准备：  
小组撰写好项目管理计划，同时做好需求分析说明书。博物馆导览APP面向群众，设计时以简单操作、功能强大和经济实惠为目标进行推进工作。  
### 2、可行性研究
#### 2.1背景：
	软件系统的名称：博物馆导览APP
	项目组组长：肖开源
	组员：刘季平、石炜刚、王雨浓
	用户：适用于全体群众
#### 2.2可行性研究前提：
	（1）要求：
	功能模块：登录界面、博物馆导览界面、博物馆总览界面、视频浏览界面、个人信息界面。
	（2）条件、假定和限制：
	所建议系统的运行寿命的最小值为1年；
	进行系统方案选择比较的时间为1周；
	由于没有经费、投资，所以程序做的比较简单。
#### 2.3可行性研究分析：
	技术可行性：
	    前后端交接顺利，有比较成熟的技术体系支撑；
	    学习过数据库设计和使用；
	    博物馆导览界面和视频浏览界面能够熟练使用第三方api。
	操作可行性：
	    由组长带领和督促组员进行开发设计，保证进度持续更新；
	    每周发布周记，用来检查每组每周完成情况，保证产品质量；
	    团长每周分配固定任务，保证系统可以按时完成。
### 3、项目开发计划
#### 3.1项目开发计划内容：
（1）项目组长召集小组成员针对所选项目开展开发计划，进一步说明项目的大小、范围、复杂程度；  
（2）项目组长召集小组成员进行任务分解与任务分配；  
（3）确定任务进度；  
（4）确定完成项目的环境和工具；  
（5）项目组长按照要求完成项目设计报告。  
#### 3.2.产品：
（1）程序：博物馆导览APP。  
（2）所用编程语言：Dart。  
#### 3.3.支持条件：
本小组使用的是flutter框架，需要用到Android Studio
登陆界面：  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICEB164604386094D0B80BEB3F565089454/36)   
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICED655E9E00ADB43D683113042BBF01FBA/37)  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICEB09076023D184ABC87901AB845621F38/38)  
博物馆导览界面：  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICE1E1E0B7712474A8BA6CAF0BF4609C5C3/39)  
博物馆总览界面：  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICEA21EC564616740A08C803A4A596F2B7F/40)  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICE374B59BA45DE4C0A986D88554D46C1D8/41)  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICE4B39B71E5AD247308053DCCDF68A3C93/42)  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICEB115E63123F54C5F8605DCB4B4B19BBF/43)  
  
视频浏览界面：  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICEE886CF0EE81F4D189CD31A2CC4046FEC/44)  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICE5EC5012DAF6A479EA17F5C7AF271A02F/45)  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICE26FF895C0A8F4AACAD4472F4BB8824FE/47)  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICE8B9DE2C4DBB64D69AA4206A8B4A8B372/48)  

  
个人信息界面：  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICE74764783F0D14F549B3602B9DE50B60D/49)  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICEFFB8D2B46A824968833116A3277CDA0E/50)  
![image](https://note.youdao.com/yws/public/resource/b5aa2fda8619ea16331c456c614c46fa/xmlnote/OFFICE03FAED2A70034C3CBF58C7A23D525437/51)   
### 4、软件测试
#### 4.1.软件测试概念：
软件测试就是利用测试工具按照测试方案和流程对产品进行功能和性能测试，甚至根据需要编写不同的测试工具、设计和维护测试系统、对测试方案可能出现的问题进行分析和评估。执行测试用例后，需要跟踪故障，以确保开发的产品适合需求。使用人工或者手动手段来运行或测试某个系统的过程，其目的在于检验它是否满足规定的需求或弄清预期结果与实际结果的差别。
#### 4.2.软件测试目的：
软件测试失败随着软件的产生而产生，有了软件的生产和运行就必然有软件测试。测试是为了发现程序中的错误而执行程序的过程。测试的目的是软件投入生产性运行之前，尽可能多地发现软件中的错误。成功的测试能发现系统运行中的错误，让系统正确运行。
#### 4.3.软件测试原则：
	（1）软件开发人员应当避免测试自己的程序；
	（2）应尽早地并且不间断地进行软件测试；
	（3）对测试用例要有正确的态度；
	（4）注意软件测试中的群集现象；
	（5）严格执行测试计划，排除测试的随意性，以避免发生疏漏或者重复无效的工作；
	（6）应当对每一个测试结果进行全面检查；
	（7）妥善保存测试用例、测试计划、测试报告和最终分析报告，以备回归测试及维护之用。
#### 4.4.本软件测试步骤：
本软件分为4部分：  
（1）登录界面：  
登录界面有注册和登录两个选项。  
选择注册进行增添新用户，并在数据库中进行相应的匹配，查看是否注册成功；  
登录界面可以进行用户登录，登录成功可以进入到APP的主页面，选择登录用户，对用户属性进行判别，当用户属性正确时，测试能否顺利进入主界面；  
（2）博物馆导览界面：  
博物馆导览界面应用了第三方的api，由于经费不足，导致技术资源有限，博物馆导览界面存在定位功能不稳定的缺陷，但总体的地图可以比较清晰的显现出来。  
博物馆导览界面测试需要与平常的地图软件中显示的基本信息比对，并测试点击博物馆的标志是否能够进入相应的博物馆信息界面。  
（3）博物馆总览界面：  
博物馆总览界面是一个包含全国203个博物馆的列表。点击列表中的某一项可以进入博物馆信息界面，博物馆信息界面包括基本信息、展览信息和藏品信息。  
基本信息包括地址、开放时间、电话和介绍；展览信息包括展览名称、展览时间、展览图片链接和展览介绍；藏品信息包括藏品名称、图片链接、藏品简介。  
博物馆总览界面进行软件测试时应当与数据库的信息进行匹配，如果匹配成功并且显示无误，则说明软件测试成功。  
（4）视频浏览界面：  
视频浏览界面包括“我的视频”和“发布视频”两个模块。视频浏览主界面显示所用用户发布的视频；“我的视频”显示用户发布的视频记录；“发布视频”提供用户发布视频的途径。  
视频浏览界面进行软件测试时可以先发布视频，输入视频标题和视频简介并选择合适的视频进行发布，发布后在“我的视频”和视频浏览主界面查看是否发布成功，如果发布成功说明软件测试成功。  
（5）个人信息界面：  
个人信息界面包括默认头像、用户名称、设置和关于我们。默认头像不可改变；用户名称默认为“唐伯虎”，如果注册时用户注册了昵称，则用户名称显示昵称；设置包括更改密码功能，当用户输入正确的账号和就密码时，用户输入的新密码会被成功设置为用户的账号密码；“关于我们”是对博物馆导览子系统APP开发人员的介绍。  



## 五、后台管理子系统设计报告
### 1.总体设计
#### 1.1系统设计的原则
后台管理子系统为满足博物馆平台管理员需求、便于管理员管理数据设计的，因此需要以管理员为中心，各种操作尽可能满足管理员日常管理的需要。在此基础上，还要使界面看上去尽可能简洁清爽，让使用者有良好的体验，因此需要遵循以下设计原则：

**实用性原则**
系统应该方面管理员对信息的查看、查找、删除等操作，在界面和功能的考量上，应该首先考虑功能的完备性。
**规范性原则**
系统中所有设计应该考虑国家标准、行业标准，符合软件工程中的设计原则与规范。
**安全性原则**
系统应对用户权限进行明确划分，普通用户无法登录用户管理系统，只有管理员能在该系统中进行登录。要把数据库可能出现的数据丢失问题考虑进去，建立起完备的数据备份恢复机制。管理员操作完毕后，必须能够进行保存操作记录的工作，书写管理员日志。
**可扩展性原则**
对系统功能的需求可能随着时间的变化而变化，因此系统所有功能模块都需要预留出必要扩展接口。
**系统模块化设计原则**
将程序划分成用户管理、讲解审核、数据管理、数据备份和恢复四个功能模块，模块之间减少数据和代码的共享，降低模块之间的耦合性，实现信息隐蔽和功能独立。
#### 1.2体系结构设计
采用B/S结构
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEK5G4ER6PG2kd5kdRGVii2xAU.XdKuHqk3xMgEXhCrAof3BighvcJ4fXTx2iKUcK.aFP5AsvOWy1PCGHsiPRiY0!/b&bo=dAJfAQAAAAABFxg!&rf=viewer_4)
#### 1.3功能架构设计
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEPnumW5fFRQ*8GAFWqy6kTGV2mEOmxXaScyfdMtzoYf3425yW74Vytzvnfvc.KmujT8X9Dhm8AfkAD8fIG8m7b8!/b&bo=MgTMAQAAAAADF8k!&rf=viewer_4)
### 2.功能模块设计
#### 2.1登录模块
   - 用户输入账号和密码，随后跳转至主页面
#### 2.2用户管理模块
 - 管理用户列表
     - 修改用户的状态（正常、禁言）
     - 调整用户的权限（管理员、普通用户）
    -  管理用户的账号、密码
    -  管理非法昵称
     - 删除异常用户
- 添加用户
    - 填入用户信息（包括身份证号、姓名、昵称等）
- 管理员日志
     - 记录管理员重要操作
#### 2.3讲解审核模块
- 点击查看提交的讲解视频
- 审核讲解视频
- 修改待审核视频的状态
#### 2.4数据管理模块
  - 管理博物馆列表
    - 查看所选博物馆的详细信息
    - 修改博物馆
    - 删除博物馆
  - 管理藏品列表
    - 查看藏品详细信息
    - 修改藏品信息
    - 删除藏品信息
  - 管理新闻列表
    - 查看新闻详细信息
    - 修改新闻信息
    - 删除新闻信息
  - 管理用户点评列表
    - 删除评论
#### 2.5数据库文件恢复和备份模块
- 选择文件
- 恢复文件
- 备份文件
### 3.页面设计
#### 3.1登录界面
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEEGdFDRkahDtegyvsCIAPpeQ3lOvVV*gtwYg368SoM4HzwLrzDo819Zw5w31hxgm080telBgNPrQehOqAEsVM2A!/b&bo=gQVLAwAAAAADR64!&rf=viewer_4)
#### 3.2用户管理界面
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEBSu9m529IwrXX8xmNzLlVKDjMUC50vjqhiDk2NreaAkqDBYEfBDYhvvPP.cL.TDmb8UN9LM6ZxvaaDByscpnaM!/b&bo=gQVLAwAAAAADF*4!&rf=viewer_4)
#### 3.3审核界面
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrECFWjEVWhaRkhtsKchdiSTzw5*3f*sQVEnB6DOoi.vg*.NyzV04joKlveE.9bKeZ2CQmruoFWkVvaOCFRbTHWtY!/b&bo=gQVLAwAAAAADF*4!&rf=viewer_4)
#### 3.4数据管理界面
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEMIZ3wnmZWcKWX2mk1*NSi78pk5au6c6UnQ*9O9AMKqzOc*wl2OiYM*PHM4vBIOmCqlTIW8t*8lTtz4c8rUV*p4!/b&bo=gQVLAwAAAAADF*4!&rf=viewer_4)
#### 3.5备份恢复界面
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEIFoitZ6hKn7.MVajCbrrRcsvRd8We74MxACNbC6mxTlFau44YZKZyXyhde9S1qePWKJgY2aYr9suIsRtGeiYlQ!/b&bo=gQVLAwAAAAADF*4!&rf=viewer_4)
### 4数据库设计
#### 4.1数据库安装与配置
**服务器基本配置：**

选用阿里云的轻量应用服务器
内存：2GB
系统盘：40GB
操作系统采用CentOS7.3

**应用部署：**
Web服务器选用Apache
数据库选用mysql5.7.34
#### 4.2数据库表结构设计
AdministratorLog表
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEO8oWJj15H5844WiU0jSk0kjud7L3TrUB7sc0ZnLf4yphGF9fCAopAXhRhHVYo1.WnbW9WtDJ5GSC5M0vuEZRww!/b&bo=dgNtAAAAAAADFyo!&rf=viewer_4)
Collection表
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEP..e*KGlxSq6mTDnA6y6y9b3L8IpqV8*CsF2T3gQCbEv81kYijLgSRM*WCRDkzCcJLh1S4ZsgOad7pEyqJObTg!/b&bo=.wOpAAAAAAADF2M!&rf=viewer_4)
databaseBackupRecord表
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrECmgqhAygWsFux1cAnvaLRnSr18xcztKW0Hrdqo.dB3XeDH5HVZ7ZRITBHQe9fAQ1iXBC.HYPN1bwI90EwdveUg!/b&bo=kgN*AAAAAAADF9w!&rf=viewer_4)
MuseumBasicInformation表
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEPWS9HoebMrmfjUqoxpZBL91IFpVuj1wdbADrvG4TjbP4KBvxUO4h2APdMn.hnydDWWuc70b82OO7AOUIa2FpqA!/b&bo=5gPSAAAAAAADFwU!&rf=viewer_4)
userdianping表
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEDQuVDCgO.sXVopB2.p9Wiv2VeKnYu0pLoT0cwJIMLCrGloRseM9kfApaV.XR1kxNa3PG73gm1LT8UUEhK8aoUc!/b&bo=jwO2AAAAAAADFwg!&rf=viewer_4)
newsall表
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEOZFNUubAYK38aFYnjOnSlIIhKoxdVffYoisCSwRjTP6BG3wKYR67iUxZhmS3mruBZXuUTLGfh8TTfa1I3ScUFo!/b&bo=jgPUAAAAAAADF2s!&rf=viewer_4)
UnderView表
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrEHQUc*3AqwcIsAjLmN0Ldm0pfJCSMITDw6Uzs8LfuDM4KiPm4tEYQNMK*Tv9Lfx*iZ2OpfAk2Bkfyl0ez0iBFCg!/b&bo=1QOrAAAAAAADF08!&rf=viewer_4)
user表
![avatar](http://m.qpic.cn/psc?/V54BUAbS1L5l5C3cWE180H8yAN3cZNSD/TmEUgtj9EK6.7V8ajmQrENXSq.y0uDqKiMRbOWKDGUceby2JC9B9w7tL7QpxlgRLLo2wy3MQP01AoQKLplVcjbRLW6xIvqRagtZAMtehmJ8!/b&bo=6wPZAAAAAAADFwM!&rf=viewer_4)




